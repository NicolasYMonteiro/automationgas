"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/profits/route";
exports.ids = ["app/api/profits/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofits%2Froute&page=%2Fapi%2Fprofits%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofits%2Froute.ts&appDir=C%3A%5CUsers%5Cnicol%5CProjects%5CProjectsForLeads%5Cautomationgas%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cnicol%5CProjects%5CProjectsForLeads%5Cautomationgas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofits%2Froute&page=%2Fapi%2Fprofits%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofits%2Froute.ts&appDir=C%3A%5CUsers%5Cnicol%5CProjects%5CProjectsForLeads%5Cautomationgas%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cnicol%5CProjects%5CProjectsForLeads%5Cautomationgas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_nicol_Projects_ProjectsForLeads_automationgas_app_api_profits_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/profits/route.ts */ \"(rsc)/./app/api/profits/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/profits/route\",\n        pathname: \"/api/profits\",\n        filename: \"route\",\n        bundlePath: \"app/api/profits/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\nicol\\\\Projects\\\\ProjectsForLeads\\\\automationgas\\\\app\\\\api\\\\profits\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_nicol_Projects_ProjectsForLeads_automationgas_app_api_profits_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/profits/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9maXRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9maXRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvZml0cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNuaWNvbCU1Q1Byb2plY3RzJTVDUHJvamVjdHNGb3JMZWFkcyU1Q2F1dG9tYXRpb25nYXMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q25pY29sJTVDUHJvamVjdHMlNUNQcm9qZWN0c0ZvckxlYWRzJTVDYXV0b21hdGlvbmdhcyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QztBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2F1dG9tYXRpb25nYXMvPzAwZjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcbmljb2xcXFxcUHJvamVjdHNcXFxcUHJvamVjdHNGb3JMZWFkc1xcXFxhdXRvbWF0aW9uZ2FzXFxcXGFwcFxcXFxhcGlcXFxccHJvZml0c1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvZml0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2ZpdHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Byb2ZpdHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxuaWNvbFxcXFxQcm9qZWN0c1xcXFxQcm9qZWN0c0ZvckxlYWRzXFxcXGF1dG9tYXRpb25nYXNcXFxcYXBwXFxcXGFwaVxcXFxwcm9maXRzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Byb2ZpdHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofits%2Froute&page=%2Fapi%2Fprofits%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofits%2Froute.ts&appDir=C%3A%5CUsers%5Cnicol%5CProjects%5CProjectsForLeads%5Cautomationgas%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cnicol%5CProjects%5CProjectsForLeads%5Cautomationgas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/profits/route.ts":
/*!**********************************!*\
  !*** ./app/api/profits/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/next-auth/next/index.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n\n\n\n\nasync function GET(request) {\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.id) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const period = searchParams.get(\"period\") || \"monthly\";\n        const year = searchParams.get(\"year\") || new Date().getFullYear().toString();\n        // Buscar vendas e despesas baseado no período\n        const now = new Date();\n        let startDate;\n        let endDate = now;\n        switch(period){\n            case \"daily\":\n                startDate = new Date(now);\n                startDate.setDate(startDate.getDate() - 30) // Últimos 30 dias\n                ;\n                break;\n            case \"weekly\":\n                startDate = new Date(now);\n                startDate.setDate(startDate.getDate() - 84) // Últimas 12 semanas\n                ;\n                break;\n            case \"monthly\":\n                startDate = new Date(parseInt(year), 0, 1) // Primeiro dia do ano\n                ;\n                endDate = new Date(parseInt(year), 11, 31) // Último dia do ano\n                ;\n                break;\n            case \"yearly\":\n                startDate = new Date(parseInt(year) - 4, 0, 1) // Últimos 5 anos\n                ;\n                break;\n            default:\n                startDate = new Date(parseInt(year), 0, 1);\n                endDate = new Date(parseInt(year), 11, 31);\n        }\n        // Construir filtros de data\n        const dateFilter = {};\n        if (startDate) {\n            dateFilter.gte = startDate;\n        }\n        if (endDate) {\n            dateFilter.lte = endDate;\n        }\n        // Buscar vendas\n        const salesWhere = {\n            status: \"COMPLETED\"\n        };\n        if (Object.keys(dateFilter).length > 0) {\n            salesWhere.createdAt = dateFilter;\n        }\n        const sales = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.sale.findMany({\n            where: salesWhere,\n            include: {\n                product: {\n                    select: {\n                        name: true\n                    }\n                },\n                customer: {\n                    select: {\n                        name: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"asc\"\n            }\n        });\n        // Buscar despesas\n        const expensesWhere = {};\n        if (Object.keys(dateFilter).length > 0) {\n            expensesWhere.createdAt = dateFilter;\n        }\n        const expenses = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.expense.findMany({\n            where: expensesWhere,\n            include: {\n                vehicle: {\n                    select: {\n                        name: true,\n                        plate: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"asc\"\n            }\n        });\n        console.log(`Found ${sales.length} sales and ${expenses.length} expenses for period ${period}, year ${year}`);\n        // Processar dados baseado no período\n        let processedData = [];\n        if (period === \"daily\") {\n            // Agrupar por dia\n            const dailyMap = new Map();\n            sales.forEach((sale)=>{\n                const date = sale.createdAt.toISOString().split(\"T\")[0];\n                if (!dailyMap.has(date)) {\n                    dailyMap.set(date, {\n                        period: date,\n                        sales: 0,\n                        expenses: 0,\n                        profit: 0\n                    });\n                }\n                dailyMap.get(date).sales += Number(sale.totalPrice);\n            });\n            expenses.forEach((expense)=>{\n                const date = expense.createdAt.toISOString().split(\"T\")[0];\n                if (!dailyMap.has(date)) {\n                    dailyMap.set(date, {\n                        period: date,\n                        sales: 0,\n                        expenses: 0,\n                        profit: 0\n                    });\n                }\n                dailyMap.get(date).expenses += Number(expense.amount);\n            });\n            processedData = Array.from(dailyMap.values()).map((item)=>({\n                    period: new Date(item.period).toLocaleDateString(\"pt-BR\", {\n                        day: \"2-digit\",\n                        month: \"2-digit\"\n                    }),\n                    sales: item.sales,\n                    expenses: item.expenses,\n                    profit: item.sales - item.expenses\n                }));\n        } else if (period === \"weekly\") {\n            // Agrupar por semana\n            const weeklyMap = new Map();\n            sales.forEach((sale)=>{\n                const weekStart = new Date(sale.createdAt);\n                weekStart.setDate(weekStart.getDate() - weekStart.getDay());\n                const weekKey = weekStart.toISOString().split(\"T\")[0];\n                if (!weeklyMap.has(weekKey)) {\n                    weeklyMap.set(weekKey, {\n                        period: weekKey,\n                        sales: 0,\n                        expenses: 0,\n                        profit: 0\n                    });\n                }\n                weeklyMap.get(weekKey).sales += Number(sale.totalPrice);\n            });\n            expenses.forEach((expense)=>{\n                const weekStart = new Date(expense.createdAt);\n                weekStart.setDate(weekStart.getDate() - weekStart.getDay());\n                const weekKey = weekStart.toISOString().split(\"T\")[0];\n                if (!weeklyMap.has(weekKey)) {\n                    weeklyMap.set(weekKey, {\n                        period: weekKey,\n                        sales: 0,\n                        expenses: 0,\n                        profit: 0\n                    });\n                }\n                weeklyMap.get(weekKey).expenses += Number(expense.amount);\n            });\n            let weekCount = 1;\n            processedData = Array.from(weeklyMap.values()).map((item)=>({\n                    period: `Sem ${weekCount++}`,\n                    sales: item.sales,\n                    expenses: item.expenses,\n                    profit: item.sales - item.expenses\n                }));\n        } else if (period === \"monthly\") {\n            // Agrupar por mês\n            const monthlyMap = new Map();\n            sales.forEach((sale)=>{\n                const monthKey = `${sale.createdAt.getFullYear()}-${String(sale.createdAt.getMonth() + 1).padStart(2, \"0\")}`;\n                if (!monthlyMap.has(monthKey)) {\n                    monthlyMap.set(monthKey, {\n                        period: monthKey,\n                        sales: 0,\n                        expenses: 0,\n                        profit: 0\n                    });\n                }\n                monthlyMap.get(monthKey).sales += Number(sale.totalPrice);\n            });\n            expenses.forEach((expense)=>{\n                const monthKey = `${expense.createdAt.getFullYear()}-${String(expense.createdAt.getMonth() + 1).padStart(2, \"0\")}`;\n                if (!monthlyMap.has(monthKey)) {\n                    monthlyMap.set(monthKey, {\n                        period: monthKey,\n                        sales: 0,\n                        expenses: 0,\n                        profit: 0\n                    });\n                }\n                monthlyMap.get(monthKey).expenses += Number(expense.amount);\n            });\n            processedData = Array.from(monthlyMap.values()).map((item)=>{\n                const [year, month] = item.period.split(\"-\");\n                const date = new Date(parseInt(year), parseInt(month) - 1, 1);\n                const profit = item.sales - item.expenses;\n                const margin = item.sales > 0 ? profit / item.sales * 100 : 0;\n                return {\n                    period: date.toLocaleDateString(\"pt-BR\", {\n                        month: \"short\",\n                        year: \"numeric\"\n                    }),\n                    sales: item.sales,\n                    expenses: item.expenses,\n                    profit,\n                    margin: Math.round(margin * 10) / 10\n                };\n            });\n        } else if (period === \"yearly\") {\n            // Agrupar por ano\n            const yearlyMap = new Map();\n            sales.forEach((sale)=>{\n                const year = sale.createdAt.getFullYear().toString();\n                if (!yearlyMap.has(year)) {\n                    yearlyMap.set(year, {\n                        period: year,\n                        sales: 0,\n                        expenses: 0,\n                        profit: 0\n                    });\n                }\n                yearlyMap.get(year).sales += Number(sale.totalPrice);\n            });\n            expenses.forEach((expense)=>{\n                const year = expense.createdAt.getFullYear().toString();\n                if (!yearlyMap.has(year)) {\n                    yearlyMap.set(year, {\n                        period: year,\n                        sales: 0,\n                        expenses: 0,\n                        profit: 0\n                    });\n                }\n                yearlyMap.get(year).expenses += Number(expense.amount);\n            });\n            processedData = Array.from(yearlyMap.values()).map((item)=>({\n                    period: item.period,\n                    sales: item.sales,\n                    expenses: item.expenses,\n                    profit: item.sales - item.expenses\n                }));\n        }\n        // Ordenar dados por período\n        processedData.sort((a, b)=>{\n            if (period === \"daily\") {\n                return new Date(a.period.split(\"/\").reverse().join(\"-\")).getTime() - new Date(b.period.split(\"/\").reverse().join(\"-\")).getTime();\n            }\n            return a.period.localeCompare(b.period);\n        });\n        // Calcular totais\n        const totalSales = processedData.reduce((sum, item)=>sum + item.sales, 0);\n        const totalExpenses = processedData.reduce((sum, item)=>sum + item.expenses, 0);\n        const totalProfit = totalSales - totalExpenses;\n        const profitMargin = totalSales > 0 ? totalProfit / totalSales * 100 : 0;\n        // Encontrar melhor e pior período\n        let bestPeriod = null;\n        let worstPeriod = null;\n        if (processedData.length > 0) {\n            bestPeriod = processedData.reduce((best, current)=>current.profit > best.profit ? current : best);\n            worstPeriod = processedData.reduce((worst, current)=>current.profit < worst.profit ? current : worst);\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            period,\n            year,\n            data: processedData,\n            summary: {\n                totalSales,\n                totalExpenses,\n                totalProfit,\n                profitMargin: Math.round(profitMargin * 10) / 10,\n                bestPeriod,\n                worstPeriod\n            }\n        });\n    } catch (error) {\n        console.error(\"Error fetching profits data:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZHdDLFFBQVF4QyxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxPQUFPVixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0IsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDN0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2F1dG9tYXRpb25nYXMvLi9hcHAvYXBpL3Byb2ZpdHMvcm91dGUudHM/NjY5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvbmV4dCdcclxuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tICdAL2xpYi9hdXRoJ1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9wcmlzbWEnXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxyXG4gICAgXHJcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmlkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXHJcbiAgICBjb25zdCBwZXJpb2QgPSBzZWFyY2hQYXJhbXMuZ2V0KCdwZXJpb2QnKSB8fCAnbW9udGhseSdcclxuICAgIGNvbnN0IHllYXIgPSBzZWFyY2hQYXJhbXMuZ2V0KCd5ZWFyJykgfHwgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKClcclxuXHJcbiAgICAvLyBCdXNjYXIgdmVuZGFzIGUgZGVzcGVzYXMgYmFzZWFkbyBubyBwZXLDrW9kb1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxyXG4gICAgbGV0IHN0YXJ0RGF0ZTogRGF0ZVxyXG4gICAgbGV0IGVuZERhdGU6IERhdGUgPSBub3dcclxuXHJcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xyXG4gICAgICBjYXNlICdkYWlseSc6XHJcbiAgICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUobm93KVxyXG4gICAgICAgIHN0YXJ0RGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgLSAzMCkgLy8gw5psdGltb3MgMzAgZGlhc1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ3dlZWtseSc6XHJcbiAgICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUobm93KVxyXG4gICAgICAgIHN0YXJ0RGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgLSA4NCkgLy8gw5psdGltYXMgMTIgc2VtYW5hc1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ21vbnRobHknOlxyXG4gICAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHBhcnNlSW50KHllYXIpLCAwLCAxKSAvLyBQcmltZWlybyBkaWEgZG8gYW5vXHJcbiAgICAgICAgZW5kRGF0ZSA9IG5ldyBEYXRlKHBhcnNlSW50KHllYXIpLCAxMSwgMzEpIC8vIMOabHRpbW8gZGlhIGRvIGFub1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ3llYXJseSc6XHJcbiAgICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUocGFyc2VJbnQoeWVhcikgLSA0LCAwLCAxKSAvLyDDmmx0aW1vcyA1IGFub3NcclxuICAgICAgICBicmVha1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHBhcnNlSW50KHllYXIpLCAwLCAxKVxyXG4gICAgICAgIGVuZERhdGUgPSBuZXcgRGF0ZShwYXJzZUludCh5ZWFyKSwgMTEsIDMxKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbnN0cnVpciBmaWx0cm9zIGRlIGRhdGFcclxuICAgIGNvbnN0IGRhdGVGaWx0ZXI6IGFueSA9IHt9XHJcbiAgICBpZiAoc3RhcnREYXRlKSB7XHJcbiAgICAgIGRhdGVGaWx0ZXIuZ3RlID0gc3RhcnREYXRlXHJcbiAgICB9XHJcbiAgICBpZiAoZW5kRGF0ZSkge1xyXG4gICAgICBkYXRlRmlsdGVyLmx0ZSA9IGVuZERhdGVcclxuICAgIH1cclxuXHJcbiAgICAvLyBCdXNjYXIgdmVuZGFzXHJcbiAgICBjb25zdCBzYWxlc1doZXJlOiBhbnkgPSB7IHN0YXR1czogJ0NPTVBMRVRFRCcgfVxyXG4gICAgaWYgKE9iamVjdC5rZXlzKGRhdGVGaWx0ZXIpLmxlbmd0aCA+IDApIHtcclxuICAgICAgc2FsZXNXaGVyZS5jcmVhdGVkQXQgPSBkYXRlRmlsdGVyXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2FsZXMgPSBhd2FpdCBwcmlzbWEuc2FsZS5maW5kTWFueSh7XHJcbiAgICAgIHdoZXJlOiBzYWxlc1doZXJlLFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgcHJvZHVjdDoge1xyXG4gICAgICAgICAgc2VsZWN0OiB7IG5hbWU6IHRydWUgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY3VzdG9tZXI6IHtcclxuICAgICAgICAgIHNlbGVjdDogeyBuYW1lOiB0cnVlIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIG9yZGVyQnk6IHtcclxuICAgICAgICBjcmVhdGVkQXQ6ICdhc2MnXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gQnVzY2FyIGRlc3Blc2FzXHJcbiAgICBjb25zdCBleHBlbnNlc1doZXJlOiBhbnkgPSB7fVxyXG4gICAgaWYgKE9iamVjdC5rZXlzKGRhdGVGaWx0ZXIpLmxlbmd0aCA+IDApIHtcclxuICAgICAgZXhwZW5zZXNXaGVyZS5jcmVhdGVkQXQgPSBkYXRlRmlsdGVyXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBwcmlzbWEuZXhwZW5zZS5maW5kTWFueSh7XHJcbiAgICAgIHdoZXJlOiBleHBlbnNlc1doZXJlLFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgdmVoaWNsZToge1xyXG4gICAgICAgICAgc2VsZWN0OiB7IG5hbWU6IHRydWUsIHBsYXRlOiB0cnVlIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIG9yZGVyQnk6IHtcclxuICAgICAgICBjcmVhdGVkQXQ6ICdhc2MnXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY29uc29sZS5sb2coYEZvdW5kICR7c2FsZXMubGVuZ3RofSBzYWxlcyBhbmQgJHtleHBlbnNlcy5sZW5ndGh9IGV4cGVuc2VzIGZvciBwZXJpb2QgJHtwZXJpb2R9LCB5ZWFyICR7eWVhcn1gKVxyXG5cclxuICAgIC8vIFByb2Nlc3NhciBkYWRvcyBiYXNlYWRvIG5vIHBlcsOtb2RvXHJcbiAgICBsZXQgcHJvY2Vzc2VkRGF0YTogYW55W10gPSBbXVxyXG5cclxuICAgIGlmIChwZXJpb2QgPT09ICdkYWlseScpIHtcclxuICAgICAgLy8gQWdydXBhciBwb3IgZGlhXHJcbiAgICAgIGNvbnN0IGRhaWx5TWFwID0gbmV3IE1hcCgpXHJcbiAgICAgIFxyXG4gICAgICBzYWxlcy5mb3JFYWNoKHNhbGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBzYWxlLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cclxuICAgICAgICBpZiAoIWRhaWx5TWFwLmhhcyhkYXRlKSkge1xyXG4gICAgICAgICAgZGFpbHlNYXAuc2V0KGRhdGUsIHsgcGVyaW9kOiBkYXRlLCBzYWxlczogMCwgZXhwZW5zZXM6IDAsIHByb2ZpdDogMCB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBkYWlseU1hcC5nZXQoZGF0ZSkuc2FsZXMgKz0gTnVtYmVyKHNhbGUudG90YWxQcmljZSlcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGV4cGVuc2VzLmZvckVhY2goZXhwZW5zZSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGV4cGVuc2UuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxyXG4gICAgICAgIGlmICghZGFpbHlNYXAuaGFzKGRhdGUpKSB7XHJcbiAgICAgICAgICBkYWlseU1hcC5zZXQoZGF0ZSwgeyBwZXJpb2Q6IGRhdGUsIHNhbGVzOiAwLCBleHBlbnNlczogMCwgcHJvZml0OiAwIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhaWx5TWFwLmdldChkYXRlKS5leHBlbnNlcyArPSBOdW1iZXIoZXhwZW5zZS5hbW91bnQpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBwcm9jZXNzZWREYXRhID0gQXJyYXkuZnJvbShkYWlseU1hcC52YWx1ZXMoKSkubWFwKGl0ZW0gPT4gKHtcclxuICAgICAgICBwZXJpb2Q6IG5ldyBEYXRlKGl0ZW0ucGVyaW9kKS50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJywgeyBkYXk6ICcyLWRpZ2l0JywgbW9udGg6ICcyLWRpZ2l0JyB9KSxcclxuICAgICAgICBzYWxlczogaXRlbS5zYWxlcyxcclxuICAgICAgICBleHBlbnNlczogaXRlbS5leHBlbnNlcyxcclxuICAgICAgICBwcm9maXQ6IGl0ZW0uc2FsZXMgLSBpdGVtLmV4cGVuc2VzXHJcbiAgICAgIH0pKVxyXG4gICAgfSBlbHNlIGlmIChwZXJpb2QgPT09ICd3ZWVrbHknKSB7XHJcbiAgICAgIC8vIEFncnVwYXIgcG9yIHNlbWFuYVxyXG4gICAgICBjb25zdCB3ZWVrbHlNYXAgPSBuZXcgTWFwKClcclxuICAgICAgXHJcbiAgICAgIHNhbGVzLmZvckVhY2goc2FsZSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2Vla1N0YXJ0ID0gbmV3IERhdGUoc2FsZS5jcmVhdGVkQXQpXHJcbiAgICAgICAgd2Vla1N0YXJ0LnNldERhdGUod2Vla1N0YXJ0LmdldERhdGUoKSAtIHdlZWtTdGFydC5nZXREYXkoKSlcclxuICAgICAgICBjb25zdCB3ZWVrS2V5ID0gd2Vla1N0YXJ0LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghd2Vla2x5TWFwLmhhcyh3ZWVrS2V5KSkge1xyXG4gICAgICAgICAgd2Vla2x5TWFwLnNldCh3ZWVrS2V5LCB7IHBlcmlvZDogd2Vla0tleSwgc2FsZXM6IDAsIGV4cGVuc2VzOiAwLCBwcm9maXQ6IDAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgd2Vla2x5TWFwLmdldCh3ZWVrS2V5KS5zYWxlcyArPSBOdW1iZXIoc2FsZS50b3RhbFByaWNlKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgZXhwZW5zZXMuZm9yRWFjaChleHBlbnNlID0+IHtcclxuICAgICAgICBjb25zdCB3ZWVrU3RhcnQgPSBuZXcgRGF0ZShleHBlbnNlLmNyZWF0ZWRBdClcclxuICAgICAgICB3ZWVrU3RhcnQuc2V0RGF0ZSh3ZWVrU3RhcnQuZ2V0RGF0ZSgpIC0gd2Vla1N0YXJ0LmdldERheSgpKVxyXG4gICAgICAgIGNvbnN0IHdlZWtLZXkgPSB3ZWVrU3RhcnQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3ZWVrbHlNYXAuaGFzKHdlZWtLZXkpKSB7XHJcbiAgICAgICAgICB3ZWVrbHlNYXAuc2V0KHdlZWtLZXksIHsgcGVyaW9kOiB3ZWVrS2V5LCBzYWxlczogMCwgZXhwZW5zZXM6IDAsIHByb2ZpdDogMCB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICB3ZWVrbHlNYXAuZ2V0KHdlZWtLZXkpLmV4cGVuc2VzICs9IE51bWJlcihleHBlbnNlLmFtb3VudClcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGxldCB3ZWVrQ291bnQgPSAxXHJcbiAgICAgIHByb2Nlc3NlZERhdGEgPSBBcnJheS5mcm9tKHdlZWtseU1hcC52YWx1ZXMoKSkubWFwKGl0ZW0gPT4gKHtcclxuICAgICAgICBwZXJpb2Q6IGBTZW0gJHt3ZWVrQ291bnQrK31gLFxyXG4gICAgICAgIHNhbGVzOiBpdGVtLnNhbGVzLFxyXG4gICAgICAgIGV4cGVuc2VzOiBpdGVtLmV4cGVuc2VzLFxyXG4gICAgICAgIHByb2ZpdDogaXRlbS5zYWxlcyAtIGl0ZW0uZXhwZW5zZXNcclxuICAgICAgfSkpXHJcbiAgICB9IGVsc2UgaWYgKHBlcmlvZCA9PT0gJ21vbnRobHknKSB7XHJcbiAgICAgIC8vIEFncnVwYXIgcG9yIG3DqnNcclxuICAgICAgY29uc3QgbW9udGhseU1hcCA9IG5ldyBNYXAoKVxyXG4gICAgICBcclxuICAgICAgc2FsZXMuZm9yRWFjaChzYWxlID0+IHtcclxuICAgICAgICBjb25zdCBtb250aEtleSA9IGAke3NhbGUuY3JlYXRlZEF0LmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKHNhbGUuY3JlYXRlZEF0LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWBcclxuICAgICAgICBpZiAoIW1vbnRobHlNYXAuaGFzKG1vbnRoS2V5KSkge1xyXG4gICAgICAgICAgbW9udGhseU1hcC5zZXQobW9udGhLZXksIHsgcGVyaW9kOiBtb250aEtleSwgc2FsZXM6IDAsIGV4cGVuc2VzOiAwLCBwcm9maXQ6IDAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgbW9udGhseU1hcC5nZXQobW9udGhLZXkpLnNhbGVzICs9IE51bWJlcihzYWxlLnRvdGFsUHJpY2UpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBleHBlbnNlcy5mb3JFYWNoKGV4cGVuc2UgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1vbnRoS2V5ID0gYCR7ZXhwZW5zZS5jcmVhdGVkQXQuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcoZXhwZW5zZS5jcmVhdGVkQXQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9YFxyXG4gICAgICAgIGlmICghbW9udGhseU1hcC5oYXMobW9udGhLZXkpKSB7XHJcbiAgICAgICAgICBtb250aGx5TWFwLnNldChtb250aEtleSwgeyBwZXJpb2Q6IG1vbnRoS2V5LCBzYWxlczogMCwgZXhwZW5zZXM6IDAsIHByb2ZpdDogMCB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBtb250aGx5TWFwLmdldChtb250aEtleSkuZXhwZW5zZXMgKz0gTnVtYmVyKGV4cGVuc2UuYW1vdW50KVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgcHJvY2Vzc2VkRGF0YSA9IEFycmF5LmZyb20obW9udGhseU1hcC52YWx1ZXMoKSkubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnN0IFt5ZWFyLCBtb250aF0gPSBpdGVtLnBlcmlvZC5zcGxpdCgnLScpXHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHBhcnNlSW50KHllYXIpLCBwYXJzZUludChtb250aCkgLSAxLCAxKVxyXG4gICAgICAgIGNvbnN0IHByb2ZpdCA9IGl0ZW0uc2FsZXMgLSBpdGVtLmV4cGVuc2VzXHJcbiAgICAgICAgY29uc3QgbWFyZ2luID0gaXRlbS5zYWxlcyA+IDAgPyAocHJvZml0IC8gaXRlbS5zYWxlcykgKiAxMDAgOiAwXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHBlcmlvZDogZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJywgeyBtb250aDogJ3Nob3J0JywgeWVhcjogJ251bWVyaWMnIH0pLFxyXG4gICAgICAgICAgc2FsZXM6IGl0ZW0uc2FsZXMsXHJcbiAgICAgICAgICBleHBlbnNlczogaXRlbS5leHBlbnNlcyxcclxuICAgICAgICAgIHByb2ZpdCxcclxuICAgICAgICAgIG1hcmdpbjogTWF0aC5yb3VuZChtYXJnaW4gKiAxMCkgLyAxMFxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0gZWxzZSBpZiAocGVyaW9kID09PSAneWVhcmx5Jykge1xyXG4gICAgICAvLyBBZ3J1cGFyIHBvciBhbm9cclxuICAgICAgY29uc3QgeWVhcmx5TWFwID0gbmV3IE1hcCgpXHJcbiAgICAgIFxyXG4gICAgICBzYWxlcy5mb3JFYWNoKHNhbGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHllYXIgPSBzYWxlLmNyZWF0ZWRBdC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKClcclxuICAgICAgICBpZiAoIXllYXJseU1hcC5oYXMoeWVhcikpIHtcclxuICAgICAgICAgIHllYXJseU1hcC5zZXQoeWVhciwgeyBwZXJpb2Q6IHllYXIsIHNhbGVzOiAwLCBleHBlbnNlczogMCwgcHJvZml0OiAwIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHllYXJseU1hcC5nZXQoeWVhcikuc2FsZXMgKz0gTnVtYmVyKHNhbGUudG90YWxQcmljZSlcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGV4cGVuc2VzLmZvckVhY2goZXhwZW5zZSA9PiB7XHJcbiAgICAgICAgY29uc3QgeWVhciA9IGV4cGVuc2UuY3JlYXRlZEF0LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKVxyXG4gICAgICAgIGlmICgheWVhcmx5TWFwLmhhcyh5ZWFyKSkge1xyXG4gICAgICAgICAgeWVhcmx5TWFwLnNldCh5ZWFyLCB7IHBlcmlvZDogeWVhciwgc2FsZXM6IDAsIGV4cGVuc2VzOiAwLCBwcm9maXQ6IDAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgeWVhcmx5TWFwLmdldCh5ZWFyKS5leHBlbnNlcyArPSBOdW1iZXIoZXhwZW5zZS5hbW91bnQpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBwcm9jZXNzZWREYXRhID0gQXJyYXkuZnJvbSh5ZWFybHlNYXAudmFsdWVzKCkpLm1hcChpdGVtID0+ICh7XHJcbiAgICAgICAgcGVyaW9kOiBpdGVtLnBlcmlvZCxcclxuICAgICAgICBzYWxlczogaXRlbS5zYWxlcyxcclxuICAgICAgICBleHBlbnNlczogaXRlbS5leHBlbnNlcyxcclxuICAgICAgICBwcm9maXQ6IGl0ZW0uc2FsZXMgLSBpdGVtLmV4cGVuc2VzXHJcbiAgICAgIH0pKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE9yZGVuYXIgZGFkb3MgcG9yIHBlcsOtb2RvXHJcbiAgICBwcm9jZXNzZWREYXRhLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgaWYgKHBlcmlvZCA9PT0gJ2RhaWx5Jykge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShhLnBlcmlvZC5zcGxpdCgnLycpLnJldmVyc2UoKS5qb2luKCctJykpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGIucGVyaW9kLnNwbGl0KCcvJykucmV2ZXJzZSgpLmpvaW4oJy0nKSkuZ2V0VGltZSgpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGEucGVyaW9kLmxvY2FsZUNvbXBhcmUoYi5wZXJpb2QpXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIENhbGN1bGFyIHRvdGFpc1xyXG4gICAgY29uc3QgdG90YWxTYWxlcyA9IHByb2Nlc3NlZERhdGEucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0uc2FsZXMsIDApXHJcbiAgICBjb25zdCB0b3RhbEV4cGVuc2VzID0gcHJvY2Vzc2VkRGF0YS5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS5leHBlbnNlcywgMClcclxuICAgIGNvbnN0IHRvdGFsUHJvZml0ID0gdG90YWxTYWxlcyAtIHRvdGFsRXhwZW5zZXNcclxuICAgIGNvbnN0IHByb2ZpdE1hcmdpbiA9IHRvdGFsU2FsZXMgPiAwID8gKHRvdGFsUHJvZml0IC8gdG90YWxTYWxlcykgKiAxMDAgOiAwXHJcblxyXG4gICAgLy8gRW5jb250cmFyIG1lbGhvciBlIHBpb3IgcGVyw61vZG9cclxuICAgIGxldCBiZXN0UGVyaW9kID0gbnVsbFxyXG4gICAgbGV0IHdvcnN0UGVyaW9kID0gbnVsbFxyXG4gICAgXHJcbiAgICBpZiAocHJvY2Vzc2VkRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGJlc3RQZXJpb2QgPSBwcm9jZXNzZWREYXRhLnJlZHVjZSgoYmVzdCwgY3VycmVudCkgPT4gXHJcbiAgICAgICAgY3VycmVudC5wcm9maXQgPiBiZXN0LnByb2ZpdCA/IGN1cnJlbnQgOiBiZXN0XHJcbiAgICAgIClcclxuICAgICAgd29yc3RQZXJpb2QgPSBwcm9jZXNzZWREYXRhLnJlZHVjZSgod29yc3QsIGN1cnJlbnQpID0+IFxyXG4gICAgICAgIGN1cnJlbnQucHJvZml0IDwgd29yc3QucHJvZml0ID8gY3VycmVudCA6IHdvcnN0XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBwZXJpb2QsXHJcbiAgICAgIHllYXIsXHJcbiAgICAgIGRhdGE6IHByb2Nlc3NlZERhdGEsXHJcbiAgICAgIHN1bW1hcnk6IHtcclxuICAgICAgICB0b3RhbFNhbGVzLFxyXG4gICAgICAgIHRvdGFsRXhwZW5zZXMsXHJcbiAgICAgICAgdG90YWxQcm9maXQsXHJcbiAgICAgICAgcHJvZml0TWFyZ2luOiBNYXRoLnJvdW5kKHByb2ZpdE1hcmdpbiAqIDEwKSAvIDEwLFxyXG4gICAgICAgIGJlc3RQZXJpb2QsXHJcbiAgICAgICAgd29yc3RQZXJpb2RcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2ZpdHMgZGF0YTonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJwcmlzbWEiLCJHRVQiLCJyZXF1ZXN0Iiwic2Vzc2lvbiIsInVzZXIiLCJpZCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInBlcmlvZCIsImdldCIsInllYXIiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJ0b1N0cmluZyIsIm5vdyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInBhcnNlSW50IiwiZGF0ZUZpbHRlciIsImd0ZSIsImx0ZSIsInNhbGVzV2hlcmUiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiY3JlYXRlZEF0Iiwic2FsZXMiLCJzYWxlIiwiZmluZE1hbnkiLCJ3aGVyZSIsImluY2x1ZGUiLCJwcm9kdWN0Iiwic2VsZWN0IiwibmFtZSIsImN1c3RvbWVyIiwib3JkZXJCeSIsImV4cGVuc2VzV2hlcmUiLCJleHBlbnNlcyIsImV4cGVuc2UiLCJ2ZWhpY2xlIiwicGxhdGUiLCJjb25zb2xlIiwibG9nIiwicHJvY2Vzc2VkRGF0YSIsImRhaWx5TWFwIiwiTWFwIiwiZm9yRWFjaCIsImRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwiaGFzIiwic2V0IiwicHJvZml0IiwiTnVtYmVyIiwidG90YWxQcmljZSIsImFtb3VudCIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsIm1hcCIsIml0ZW0iLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJkYXkiLCJtb250aCIsIndlZWtseU1hcCIsIndlZWtTdGFydCIsImdldERheSIsIndlZWtLZXkiLCJ3ZWVrQ291bnQiLCJtb250aGx5TWFwIiwibW9udGhLZXkiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwibWFyZ2luIiwiTWF0aCIsInJvdW5kIiwieWVhcmx5TWFwIiwic29ydCIsImEiLCJiIiwicmV2ZXJzZSIsImpvaW4iLCJnZXRUaW1lIiwibG9jYWxlQ29tcGFyZSIsInRvdGFsU2FsZXMiLCJyZWR1Y2UiLCJzdW0iLCJ0b3RhbEV4cGVuc2VzIiwidG90YWxQcm9maXQiLCJwcm9maXRNYXJnaW4iLCJiZXN0UGVyaW9kIiwid29yc3RQZXJpb2QiLCJiZXN0IiwiY3VycmVudCIsIndvcnN0IiwiZGF0YSIsInN1bW1hcnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/profits/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./lib/prisma.ts\");\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                // Buscar usuário no banco de dados\n                const user = await _prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    }\n                });\n                if (!user) {\n                    return null;\n                }\n                // Verificar senha (em produção, use bcrypt)\n                // Para demonstração, vamos usar senhas simples\n                const validPasswords = {\n                    \"admin@test.com\": \"admin123\",\n                    \"atendente@test.com\": \"atendente123\"\n                };\n                if (validPasswords[credentials.email] !== credentials.password) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    role: user.role\n                };\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.role = user.role;\n                token.id = user.id;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        }\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    pages: {\n        signIn: \"/auth/signin\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDaUU7QUFDaEM7QUFHMUIsTUFBTUUsY0FBK0I7SUFDMUNDLFdBQVc7UUFDVEgsMkVBQW1CQSxDQUFDO1lBQ2xCSSxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07Z0JBQVE7Z0JBQ3ZDQyxVQUFVO29CQUFFRixPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsTUFBTUUsV0FBVUwsV0FBVztnQkFDekIsSUFBSSxDQUFDQSxhQUFhQyxTQUFTLENBQUNELGFBQWFJLFVBQVU7b0JBQ2pELE9BQU87Z0JBQ1Q7Z0JBRUEsbUNBQW1DO2dCQUNuQyxNQUFNRSxPQUFPLE1BQU1WLDJDQUFNQSxDQUFDVSxJQUFJLENBQUNDLFVBQVUsQ0FBQztvQkFDeENDLE9BQU87d0JBQ0xQLE9BQU9ELFlBQVlDLEtBQUs7b0JBQzFCO2dCQUNGO2dCQUVBLElBQUksQ0FBQ0ssTUFBTTtvQkFDVCxPQUFPO2dCQUNUO2dCQUVBLDRDQUE0QztnQkFDNUMsK0NBQStDO2dCQUMvQyxNQUFNRyxpQkFBaUI7b0JBQ3JCLGtCQUFrQjtvQkFDbEIsc0JBQXNCO2dCQUN4QjtnQkFFQSxJQUFJQSxjQUFjLENBQUNULFlBQVlDLEtBQUssQ0FBZ0MsS0FBS0QsWUFBWUksUUFBUSxFQUFFO29CQUM3RixPQUFPO2dCQUNUO2dCQUVBLE9BQU87b0JBQ0xNLElBQUlKLEtBQUtJLEVBQUU7b0JBQ1hULE9BQU9LLEtBQUtMLEtBQUs7b0JBQ2pCRixNQUFNTyxLQUFLUCxJQUFJO29CQUNmWSxNQUFNTCxLQUFLSyxJQUFJO2dCQUNqQjtZQUNGO1FBQ0Y7S0FDRDtJQUNEQyxTQUFTO1FBQ1BDLFVBQVU7SUFDWjtJQUNBQyxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVWLElBQUksRUFBRTtZQUN2QixJQUFJQSxNQUFNO2dCQUNSVSxNQUFNTCxJQUFJLEdBQUdMLEtBQUtLLElBQUk7Z0JBQ3RCSyxNQUFNTixFQUFFLEdBQUdKLEtBQUtJLEVBQUU7WUFDcEI7WUFDQSxPQUFPTTtRQUNUO1FBQ0EsTUFBTUosU0FBUSxFQUFFQSxPQUFPLEVBQUVJLEtBQUssRUFBRTtZQUM5QixJQUFJQSxPQUFPO2dCQUNUSixRQUFRTixJQUFJLENBQUNJLEVBQUUsR0FBR00sTUFBTU4sRUFBRTtnQkFDMUJFLFFBQVFOLElBQUksQ0FBQ0ssSUFBSSxHQUFHSyxNQUFNTCxJQUFJO1lBQ2hDO1lBQ0EsT0FBT0M7UUFDVDtJQUNGO0lBQ0FLLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtJQUNuQ0MsT0FBTztRQUNMQyxRQUFRO0lBQ1Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXV0b21hdGlvbmdhcy8uL2xpYi9hdXRoLnRzP2JmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSBcIm5leHQtYXV0aFwiXHJcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzXCJcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIi4vcHJpc21hXCJcclxuaW1wb3J0IHsgVXNlclJvbGUgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIlxyXG5cclxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcclxuICAgICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxyXG4gICAgICBjcmVkZW50aWFsczoge1xyXG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiBcIkVtYWlsXCIsIHR5cGU6IFwiZW1haWxcIiB9LFxyXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xyXG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcclxuICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBCdXNjYXIgdXN1w6FyaW8gbm8gYmFuY28gZGUgZGFkb3NcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWZXJpZmljYXIgc2VuaGEgKGVtIHByb2R1w6fDo28sIHVzZSBiY3J5cHQpXHJcbiAgICAgICAgLy8gUGFyYSBkZW1vbnN0cmHDp8OjbywgdmFtb3MgdXNhciBzZW5oYXMgc2ltcGxlc1xyXG4gICAgICAgIGNvbnN0IHZhbGlkUGFzc3dvcmRzID0ge1xyXG4gICAgICAgICAgJ2FkbWluQHRlc3QuY29tJzogJ2FkbWluMTIzJyxcclxuICAgICAgICAgICdhdGVuZGVudGVAdGVzdC5jb20nOiAnYXRlbmRlbnRlMTIzJ1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHZhbGlkUGFzc3dvcmRzW2NyZWRlbnRpYWxzLmVtYWlsIGFzIGtleW9mIHR5cGVvZiB2YWxpZFBhc3N3b3Jkc10gIT09IGNyZWRlbnRpYWxzLnBhc3N3b3JkKSB7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXHJcbiAgICAgICAgICByb2xlOiB1c2VyLnJvbGUsXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIF0sXHJcbiAgc2Vzc2lvbjoge1xyXG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXHJcbiAgfSxcclxuICBjYWxsYmFja3M6IHtcclxuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICB0b2tlbi5yb2xlID0gdXNlci5yb2xlXHJcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRva2VuXHJcbiAgICB9LFxyXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcclxuICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uaWQgYXMgc3RyaW5nXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB0b2tlbi5yb2xlIGFzIFVzZXJSb2xlXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlc3Npb25cclxuICAgIH0sXHJcbiAgfSxcclxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcclxuICBwYWdlczoge1xyXG4gICAgc2lnbkluOiBcIi9hdXRoL3NpZ25pblwiLFxyXG4gIH0sXHJcbn1cclxuIl0sIm5hbWVzIjpbIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJwcmlzbWEiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwidmFsaWRQYXNzd29yZHMiLCJpZCIsInJvbGUiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9TRUNSRVQiLCJwYWdlcyIsInNpZ25JbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2F1dG9tYXRpb25nYXMvLi9saWIvcHJpc21hLnRzPzk4MjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXHJcblxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xyXG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofits%2Froute&page=%2Fapi%2Fprofits%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofits%2Froute.ts&appDir=C%3A%5CUsers%5Cnicol%5CProjects%5CProjectsForLeads%5Cautomationgas%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cnicol%5CProjects%5CProjectsForLeads%5Cautomationgas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();